{% extends 'core/base.html' %} {% load static %} {% block head %}
<script defer src="{% static 'core/js/chamada.js' %}"></script>
<script defer>
  document.addEventListener("alpine:init", () => {
    Alpine.data("chamada", () => ({
      students: [],
      division: "",
      classroom: "{{ classrooms.0.pk }}",
      programings: [
        // {% for p in programmings %}
        ["{{ p.subject.slug }}", "{{ p.classroom.pk }}"],
        // {% endfor %}
      ],
      student: { username: "", pk: 0 },

      getClassroom(pk) {
        this.classroom = pk;
        fetch(`{% url 'load_class' 0 %}`.replace("0", pk))
          .then((r) => r.json())
          .then((st) => {
            this.students = st.students;
          });
      },

      init() {
        console.log(this.programings)
        console.log(this.classroom)
      }
    }));
  });
</script>
<title>Chamada</title>
{% endblock %} {% block content %}
<main
  class="framed m-8 flex flex-col gap-3 p-5"
  x-init="getClassroom('{{ classrooms.0.pk }}')"
  x-data="chamada"
>
  <h1 class="text-color-secondary">Turma</h1>

  <ul class="flex gap-4">
    {% for c in classrooms %}
    <button class="alt px-5 py-3" @click="getClassroom('{{ c.pk }}')">
      {{ c }}
    </button>
    {% endfor %}
  </ul>

  <div class="mx-5 flex w-full items-center gap-6">
    <div class="mb-2 w-full text-center">
      <label class="text-xl text-color-primary">Turma</label>
      <select name="Turma" class="mt-2 w-full rounded-full text-center">
        <option>Todas</option>
        <option>A</option>
        <option>B</option>
      </select>
    </div>
    <div class="mb-2 w-full text-center">
      <label class="text-xl text-color-primary">Aula</label>
      <select name="Aula" class="mt-2 w-full rounded-full text-center">
        <template x-for="p in programings.filter(p => p[1] == classroom)">
          <option :value="p[0]" x-text="p[0]"></option>
        </template>
      </select>
    </div>
    <div class="mb-2 w-full text-center">
      <label class="text-xl text-color-primary">Data</label>
      <input
        type="date"
        class="mt-2 w-full rounded-full text-center"
        id="dataAtual"
      />
    </div>
    <div class="mb-2 w-full text-center">
      <label class="text-xl text-color-primary">Quantidade</label>
      <select id="quantidadeAulas" class="mt-2 w-full rounded-full text-center">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
    </div>
  </div>

  <h1 class="text-color-secondary">Chamada</h1>

  <div class="flex flex-col md:flex-row">
    <div class="md:w-1/2">
      <div class="container mx-auto mt-6">
        <table class="w-full rounded-none border bg-white shadow-md">
          <thead class="bg-color-secondary">
            <tr>
              <!-- Conteúdo do cabeçalho da tabela -->
            </tr>
          </thead>
          <tbody>
            <!-- Conteúdo do corpo da tabela -->
          </tbody>
        </table>
      </div>
    </div>

    <div class="md:w-1/2 md:pl-10">
      <div class="mt-5 flex w-full justify-center md:justify-start">
        <div
          class="block h-[380px] w-full rounded-2xl bg-white px-6 py-2 md:h-[380px]"
        >
          <h1
            class="mb-2 mt-2 text-center text-[40px] font-bold text-color-secondary md:text-left"
          >
            Diário
          </h1>
          <div class="field flex-grow">
            <textarea
              id="conteudo"
              name="reclamacao"
              class="h-64 w-full rounded border border-gray-300 px-4 py-2"
              placeholder="Digite o conteúdo da aula aqui"
            ></textarea>
          </div>
        </div>
      </div>

      <button type="submit" class="mt-5 h-12 w-full">Enviar</button>
    </div>
  </div>
</main>
{% endblock %}
