{% extends 'core/base.html' %} {% load static %} {% load permission_tags %} {% block head %}
<script defer src="{% static 'core/js/dashboard.js' %}"></script>
<link rel="stylesheet" href="{% static 'core/dist/css/dashboard.css' %}" />
<title>Dashboard</title>
{% endblock %} {% block content %}
<main x-data="dashboard" x-init="reload(`{% url 'query' 'student' %}`)">
  <h1 class="m-5 text-2xl">Dashboard</h1>
  <header id="sectors" class="bg-color-bg-alt p-5">
    {% csrf_token %}
    <ul id="sectors" class="flex select-none gap-4">
      {% if user|has_role:'coordinator' %}
      <li
        class="control bg-color-bg"
        @click="reload(`{% url 'query' 'student' user.pk %}`)"
      >
        Alunos
      </li>
      <li
        class="control bg-color-bg"
        @click="reload(`{% url 'query' 'teacher' user.pk %}`)"
      >
        Professores
      </li>
      {% elif user|has_role:'admin' %}
      <li
        class="control bg-color-bg"
        @click="reload(`{% url 'query' 'student' %}`)"
      >
        Alunos
      </li>
      <li
        class="control bg-color-bg"
        @click="reload(`{% url 'query' 'teacher' %}`)"
      >
        Professores
      </li>
      <li
        class="control bg-color-bg"
        @click="reload(`{% url 'query' 'coordinator' %}`)"
      >
        Coordenadores
      </li>
      {% endif %}
      <li class="control bg-color-bg" @click="filterDialog = true">Filtros</li>
      {% if user|can:'create_user' %}
      <li class="btn control bg-color-primary-dimm">
        <a href="{% url 'enroll' %}" class="flex items-center font-semibold">
          <span class="mr-1 font-semibold">Matricular</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.8"
            stroke="currentColor"
            class="h-6 w-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"
            />
          </svg>
        </a>
      </li>
      {% endif %} {% if user|can:'delete_user' %}
      <li class="btn control">
        <a
          href="{% url 'purge' 'student' %}"
          class="flex items-center font-semibold"
        >
          <span class="mr-1 font-semibold">Limpar</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.8"
            stroke="currentColor"
            class="h-6 w-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z"
            />
          </svg>
        </a>
      </li>
      {% endif %}
    </ul>
  </header>
  <section class="p-5">
    <table class="w-full">
      <thead>
        <tr
          class="border-separate border-spacing-3 bg-color-hover font-semibold"
        >
          <template x-for="header in headers">
            <td x-text="header"></td>
          </template>
        </tr>
      </thead>
      <tbody>
        <!-- TODO: see info + block/delete profile -->
        <template x-for="row in rows">
          <tr>
            <template x-for="value in row">
              <td x-text="value"></td>
            </template>
          </tr>
        </template>
      </tbody>
    </table>
  </section>
  <form>
    <div x-show="filterDialog" class="dialog-backdrop">
      <div class="dialog no_scroll">
        <header
          class="mt-3 px-4 flex flex-row justify-between text-3xl font-bold"
        >
          <h2>Filtrar Alunos</h2>
          <div>
            <button
              @click.prevent="filterDialog = false"
              class="text-3xl font-bold text-color-primary"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="h-6 w-6 transition-all hover:h-7 hover:w-7"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>
        </header>
        <section class="flex flex-col gap-4 px-4">
          <label>
            RM
            <input
              type="search"
              placeholder="Escreva o RM"
              class="mx-auto w-full rounded-lg border border-color-primary bg-gray-50 text-sm text-gray-900"
            />
          </label>
          <label>
            CPF
            <input
              type="search"
              placeholder="Escreva o CPF"
              class="mx-auto w-full rounded-lg border border-color-primary bg-gray-50 text-sm text-gray-900"
            />
          </label>
          <label>
            Nome
            <input
              type="search"
              placeholder="Escreva o Nome"
              class="mx-auto w-full rounded-lg border border-color-primary bg-gray-50 text-sm text-gray-900"
            />
          </label>
          <label>
            Turma
            <select
              class="mx-auto w-full rounded-lg border border-color-primary bg-gray-50 text-sm text-gray-900"
            >
              {% for c in classrooms %}
              <option value="{{ c.pk }}">{{ c }}</option>
              {% endfor %}
            </select>
          </label>
          <div class="flex flex-row justify-between text-lg font-normal">
            <label>
              Data de nascimento:
              <input type="date" class="rounded-3xl border-color-primary" />
            </label>
          </div>
          <div class="flex flex-row justify-center space-x-5 pt-6 text-lg">
            <button type="reset" class="alt">Limpar</button>
            <button type="submit">Aplicar</button>
          </div>
        </section>
      </div>
    </div>
  </form>
</main>
{% endblock %}
